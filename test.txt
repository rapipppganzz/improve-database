-- RapipppModss V3.0 - FE Super Magnet System with Tornado
-- GUI Design: Black & Blue Theme with Floating Logo

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer

-- Wait for character
local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- Setup anchor part system
local Folder = Instance.new("Folder", workspace)
local AnchorPart = Instance.new("Part", Folder)
local MainAttachment = Instance.new("Attachment", AnchorPart)
AnchorPart.Name = "RapipppAnchor"
AnchorPart.Anchored = true
AnchorPart.CanCollide = false
AnchorPart.Transparency = 1
AnchorPart.Size = Vector3.new(0.1, 0.1, 0.1)

-- Network system
if not getgenv().RapipppNetwork then
    getgenv().RapipppNetwork = {
        BaseParts = {},
        Velocity = Vector3.new(80, 80, 80)
    }

    RapipppNetwork.RetainPart = function(Part)
        if typeof(Part) == "Instance" and Part:IsA("BasePart") and Part:IsDescendantOf(workspace) then
            table.insert(RapipppNetwork.BaseParts, Part)
            Part.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0, 0, 0)
            Part.CanCollide = false
            Part.Massless = true
        end
    end

    local function EnablePartControl()
        LocalPlayer.ReplicationFocus = workspace
        RunService.Heartbeat:Connect(function()
            sethiddenproperty(LocalPlayer, "SimulationRadius", math.huge)
            for _, Part in pairs(RapipppNetwork.BaseParts) do
                if Part:IsDescendantOf(workspace) then
                    Part.Velocity = RapipppNetwork.Velocity
                end
            end
        end)
    end
    EnablePartControl()
end

-- Super Fast Magnet Function
local function ForcePartToPlayer(part)
    if part:IsA("Part") and not part.Anchored and 
       not part.Parent:FindFirstChild("Humanoid") and 
       not part.Parent:FindFirstChild("Head") and 
       part.Name ~= "Handle" then
        
        -- Destroy existing forces
        for _, x in next, part:GetChildren() do
            if x:IsA("BodyAngularVelocity") or x:IsA("BodyForce") or 
               x:IsA("BodyGyro") or x:IsA("BodyPosition") or 
               x:IsA("BodyThrust") or x:IsA("BodyVelocity") or 
               x:IsA("RocketPropulsion") then
                x:Destroy()
            end
        end
        
        -- Destroy constraints to break ropes
        for _, constraint in pairs(part:GetChildren()) do
            if constraint:IsA("Constraint") then
                constraint:Destroy()
            end
        end
        
        part.CanCollide = false
        part.Massless = true
        
        -- Add to network for velocity control
        RapipppNetwork.RetainPart(part)
        
        -- Use AlignPosition for precise movement
        local AlignPosition = Instance.new("AlignPosition")
        local Attachment = Instance.new("Attachment", part)
        
        AlignPosition.MaxForce = 999999999
        AlignPosition.MaxVelocity = math.huge
        AlignPosition.Responsiveness = 500
        AlignPosition.Attachment0 = Attachment
        AlignPosition.Attachment1 = MainAttachment
        AlignPosition.Parent = part
        
        -- Add torque for rotation control
        local Torque = Instance.new("Torque", part)
        Torque.Torque = Vector3.new(1000000, 1000000, 1000000)
        Torque.Attachment0 = Attachment
        
        return true
    end
    return false
end

-- Configuration
local magnetEnabled = false
local tornadoEnabled = false
local currentRadius = 100
local currentSpeed = 120
local tornadoRadius = 50
local tornadoHeight = 100
local tornadoRotationSpeed = 2
local tornadoAttractionStrength = 80
local attractedParts = {}
local tornadoParts = {}

-- Tornado System (From Lukas Script)
local function RetainPart(Part)
    if Part:IsA("BasePart") and not Part.Anchored and Part:IsDescendantOf(workspace) then
        if Part.Parent == LocalPlayer.Character or Part:IsDescendantOf(LocalPlayer.Character) then
            return false
        end

        Part.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0, 0, 0)
        Part.CanCollide = false
        return true
    end
    return false
end

local parts = {}
local function addPart(part)
    if RetainPart(part) then
        if not table.find(parts, part) then
            table.insert(parts, part)
        end
    end
end

local function removePart(part)
    local index = table.find(parts, part)
    if index then
        table.remove(parts, index)
    end
end

-- Initialize parts
for _, part in pairs(workspace:GetDescendants()) do
    addPart(part)
end

workspace.DescendantAdded:Connect(addPart)
workspace.DescendantRemoving:Connect(removePart)

-- Tornado Movement Function
local function updateTornado()
    if not tornadoEnabled then return end
    
    local humanoidRootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if humanoidRootPart then
        local tornadoCenter = humanoidRootPart.Position
        for _, part in pairs(parts) do
            if part.Parent and not part.Anchored then
                local pos = part.Position
                local distance = (Vector3.new(pos.X, tornadoCenter.Y, pos.Z) - tornadoCenter).Magnitude
                if distance <= tornadoRadius then
                    local angle = math.atan2(pos.Z - tornadoCenter.Z, pos.X - tornadoCenter.X)
                    local newAngle = angle + math.rad(tornadoRotationSpeed)
                    local targetPos = Vector3.new(
                        tornadoCenter.X + math.cos(newAngle) * math.min(tornadoRadius, distance),
                        tornadoCenter.Y + (tornadoHeight * (math.abs(math.sin((pos.Y - tornadoCenter.Y) / tornadoHeight)))),
                        tornadoCenter.Z + math.sin(newAngle) * math.min(tornadoRadius, distance)
                    )
                    local directionToTarget = (targetPos - part.Position).unit
                    part.Velocity = directionToTarget * tornadoAttractionStrength
                    tornadoParts[part] = true
                end
            end
        end
    end
end

-- Main Magnet Loop
local function startMagnet()
    magnetEnabled = true
    print("ðŸ”® RapipppModss V3.0 Magnet Activated!")
    
    local connection
    connection = RunService.Heartbeat:Connect(function()
        if not magnetEnabled then 
            connection:Disconnect()
            return 
        end
        
        local character = LocalPlayer.Character
        if not character then return end
        
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        if not rootPart then return end
        
        -- Move anchor to player position
        AnchorPart.Position = rootPart.Position
        
        -- Scan for parts in radius
        for _, part in pairs(workspace:GetDescendants()) do
            if part:IsA("BasePart") and not attractedParts[part] then
                local distance = (part.Position - rootPart.Position).Magnitude
                if distance <= currentRadius then
                    if ForcePartToPlayer(part) then
                        attractedParts[part] = true
                    end
                end
            end
        end
        
        -- Apply network velocity to all attracted parts
        for part, _ in pairs(attractedParts) do
            if part and part.Parent then
                part.Velocity = (rootPart.Position - part.Position).Unit * currentSpeed
            end
        end
    end)
end

local function startTornado()
    tornadoEnabled = true
    print("ðŸŒªï¸ RapipppModss V3.0 Tornado Activated!")
    
    local connection
    connection = RunService.Heartbeat:Connect(function()
        if not tornadoEnabled then 
            connection:Disconnect()
            return 
        end
        updateTornado()
    end)
end

local function stopMagnet()
    magnetEnabled = false
    
    -- Clean up attracted parts
    for part, _ in pairs(attractedParts) do
        if part and part.Parent then
            local alignPos = part:FindFirstChild("AlignPosition")
            if alignPos then
                alignPos:Destroy()
            end
            local torque = part:FindFirstChild("Torque")
            if torque then
                torque:Destroy()
            end
            local attachment = part:FindFirstChild("Attachment")
            if attachment then
                attachment:Destroy()
            end
        end
    end
    
    attractedParts = {}
    print("ðŸ”® RapipppModss V3.0 Magnet Deactivated!")
end

local function stopTornado()
    tornadoEnabled = false
    tornadoParts = {}
    print("ðŸŒªï¸ RapipppModss V3.0 Tornado Deactivated!")
end

-- GUI Creation - RapipppModss V3.0 Design
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "RapipppModssGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Main Container - Black & Blue Theme
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 350, 0, 480)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -240)
MainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 20)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

-- Blue Border Effect
local BorderFrame = Instance.new("Frame")
BorderFrame.Size = UDim2.new(1, 4, 1, 4)
BorderFrame.Position = UDim2.new(0, -2, 0, -2)
BorderFrame.BackgroundColor3 = Color3.fromRGB(0, 100, 255)
BorderFrame.BorderSizePixel = 0
BorderFrame.ZIndex = 0
BorderFrame.Parent = MainFrame

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

local BorderCorner = Instance.new("UICorner")
BorderCorner.CornerRadius = UDim.new(0, 14)
BorderCorner.Parent = BorderFrame

-- Header with Gradient
local Header = Instance.new("Frame")
Header.Size = UDim2.new(1, 0, 0, 60)
Header.Position = UDim2.new(0, 0, 0, 0)
Header.BackgroundColor3 = Color3.fromRGB(0, 20, 40)
Header.BorderSizePixel = 0
Header.Parent = MainFrame

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 12)
HeaderCorner.Parent = Header

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -80, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.Text = "RapipppModss V3.0"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBlack
Title.TextSize = 20
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Header

local SubTitle = Instance.new("TextLabel")
SubTitle.Size = UDim2.new(1, -80, 0, 20)
SubTitle.Position = UDim2.new(0, 15, 0, 30)
SubTitle.Text = "FE Super Magnet + Tornado System"
SubTitle.TextColor3 = Color3.fromRGB(200, 200, 255)
SubTitle.BackgroundTransparency = 1
SubTitle.Font = Enum.Font.Gotham
SubTitle.TextSize = 12
SubTitle.TextXAlignment = Enum.TextXAlignment.Left
SubTitle.Parent = Header

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -40, 0, 15)
CloseButton.Text = "âœ•"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseButton.BorderSizePixel = 0
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 16
CloseButton.Parent = Header

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Content Area
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, -20, 1, -80)
ContentFrame.Position = UDim2.new(0, 10, 0, 70)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- Status Panel
local StatusPanel = Instance.new("Frame")
StatusPanel.Size = UDim2.new(1, 0, 0, 80)
StatusPanel.Position = UDim2.new(0, 0, 0, 0)
StatusPanel.BackgroundColor3 = Color3.fromRGB(20, 25, 40)
StatusPanel.BorderColor3 = Color3.fromRGB(0, 100, 255)
StatusPanel.BorderSizePixel = 2
StatusPanel.Parent = ContentFrame

local StatusCorner = Instance.new("UICorner")
StatusCorner.CornerRadius = UDim.new(0, 8)
StatusCorner.Parent = StatusPanel

local StatusLabel = Instance.new("TextLabel")
StatusLabel.Size = UDim2.new(1, -20, 1, -10)
StatusLabel.Position = UDim2.new(0, 10, 0, 5)
StatusLabel.Text = "ðŸ”® SYSTEM READY\nâ€¢ Status: Inactive\nâ€¢ Parts: 0\nâ€¢ RapipppModss V3.0"
StatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.TextSize = 12
StatusLabel.TextXAlignment = Enum.TextXAlignment.Left
StatusLabel.TextYAlignment = Enum.TextYAlignment.Top
StatusLabel.TextWrapped = true
StatusLabel.Parent = StatusPanel

-- Magnet Controls
local MagnetLabel = Instance.new("TextLabel")
MagnetLabel.Size = UDim2.new(1, 0, 0, 25)
MagnetLabel.Position = UDim2.new(0, 0, 0, 90)
MagnetLabel.Text = "MAGNET CONTROLS"
MagnetLabel.TextColor3 = Color3.fromRGB(0, 150, 255)
MagnetLabel.BackgroundTransparency = 1
MagnetLabel.Font = Enum.Font.GothamBold
MagnetLabel.TextSize = 14
MagnetLabel.TextXAlignment = Enum.TextXAlignment.Left
MagnetLabel.Parent = ContentFrame

-- Control Buttons
local ActivateMagnetButton = Instance.new("TextButton")
ActivateMagnetButton.Size = UDim2.new(0.48, 0, 0, 35)
ActivateMagnetButton.Position = UDim2.new(0, 0, 0, 120)
ActivateMagnetButton.Text = "ðŸ§² ACTIVATE MAGNET"
ActivateMagnetButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ActivateMagnetButton.BackgroundColor3 = Color3.fromRGB(0, 150, 50)
ActivateMagnetButton.BorderSizePixel = 0
ActivateMagnetButton.Font = Enum.Font.GothamBold
ActivateMagnetButton.TextSize = 12
ActivateMagnetButton.Parent = ContentFrame

local MagnetCorner = Instance.new("UICorner")
MagnetCorner.CornerRadius = UDim.new(0, 8)
MagnetCorner.Parent = ActivateMagnetButton

local DeactivateMagnetButton = Instance.new("TextButton")
DeactivateMagnetButton.Size = UDim2.new(0.48, 0, 0, 35)
DeactivateMagnetButton.Position = UDim2.new(0.52, 0, 0, 120)
DeactivateMagnetButton.Text = "ðŸ›‘ STOP MAGNET"
DeactivateMagnetButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DeactivateMagnetButton.BackgroundColor3 = Color3.fromRGB(150, 30, 30)
DeactivateMagnetButton.BorderSizePixel = 0
DeactivateMagnetButton.Font = Enum.Font.GothamBold
DeactivateMagnetButton.TextSize = 12
DeactivateMagnetButton.Parent = ContentFrame

local DeactivateCorner = Instance.new("UICorner")
DeactivateCorner.CornerRadius = UDim.new(0, 8)
DeactivateCorner.Parent = DeactivateMagnetButton

-- Tornado Controls
local TornadoLabel = Instance.new("TextLabel")
TornadoLabel.Size = UDim2.new(1, 0, 0, 25)
TornadoLabel.Position = UDim2.new(0, 0, 0, 165)
TornadoLabel.Text = "TORNADO CONTROLS"
TornadoLabel.TextColor3 = Color3.fromRGB(255, 100, 0)
TornadoLabel.BackgroundTransparency = 1
TornadoLabel.Font = Enum.Font.GothamBold
TornadoLabel.TextSize = 14
TornadoLabel.TextXAlignment = Enum.TextXAlignment.Left
TornadoLabel.Parent = ContentFrame

local ActivateTornadoButton = Instance.new("TextButton")
ActivateTornadoButton.Size = UDim2.new(0.48, 0, 0, 35)
ActivateTornadoButton.Position = UDim2.new(0, 0, 0, 195)
ActivateTornadoButton.Text = "ðŸŒªï¸ ACTIVATE TORNADO"
ActivateTornadoButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ActivateTornadoButton.BackgroundColor3 = Color3.fromRGB(255, 100, 0)
ActivateTornadoButton.BorderSizePixel = 0
ActivateTornadoButton.Font = Enum.Font.GothamBold
ActivateTornadoButton.TextSize = 12
ActivateTornadoButton.Parent = ContentFrame

local TornadoCorner = Instance.new("UICorner")
TornadoCorner.CornerRadius = UDim.new(0, 8)
TornadoCorner.Parent = ActivateTornadoButton

local DeactivateTornadoButton = Instance.new("TextButton")
DeactivateTornadoButton.Size = UDim2.new(0.48, 0, 0, 35)
DeactivateTornadoButton.Position = UDim2.new(0.52, 0, 0, 195)
DeactivateTornadoButton.Text = "ðŸ›‘ STOP TORNADO"
DeactivateTornadoButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DeactivateTornadoButton.BackgroundColor3 = Color3.fromRGB(150, 30, 30)
DeactivateTornadoButton.BorderSizePixel = 0
DeactivateTornadoButton.Font = Enum.Font.GothamBold
DeactivateTornadoButton.TextSize = 12
DeactivateTornadoButton.Parent = ContentFrame

local DeactivateTornadoCorner = Instance.new("UICorner")
DeactivateTornadoCorner.CornerRadius = UDim.new(0, 8)
DeactivateTornadoCorner.Parent = DeactivateTornadoButton

-- Controls Section
local ControlsLabel = Instance.new("TextLabel")
ControlsLabel.Size = UDim2.new(1, 0, 0, 25)
ControlsLabel.Position = UDim2.new(0, 0, 0, 240)
ControlsLabel.Text = "SETTINGS"
ControlsLabel.TextColor3 = Color3.fromRGB(0, 200, 255)
ControlsLabel.BackgroundTransparency = 1
ControlsLabel.Font = Enum.Font.GothamBold
ControlsLabel.TextSize = 14
ControlsLabel.TextXAlignment = Enum.TextXAlignment.Left
ControlsLabel.Parent = ContentFrame

-- Magnet Radius Control
local MagnetRadiusContainer = Instance.new("Frame")
MagnetRadiusContainer.Size = UDim2.new(1, 0, 0, 60)
MagnetRadiusContainer.Position = UDim2.new(0, 0, 0, 270)
MagnetRadiusContainer.BackgroundTransparency = 1
MagnetRadiusContainer.Parent = ContentFrame

local MagnetRadiusLabel = Instance.new("TextLabel")
MagnetRadiusLabel.Size = UDim2.new(0.6, 0, 0, 25)
MagnetRadiusLabel.Position = UDim2.new(0, 0, 0, 0)
MagnetRadiusLabel.Text = "MAGNET RADIUS:"
MagnetRadiusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
MagnetRadiusLabel.BackgroundTransparency = 1
MagnetRadiusLabel.Font = Enum.Font.Gotham
MagnetRadiusLabel.TextSize = 12
MagnetRadiusLabel.TextXAlignment = Enum.TextXAlignment.Left
MagnetRadiusLabel.Parent = MagnetRadiusContainer

local MagnetRadiusValue = Instance.new("TextLabel")
MagnetRadiusValue.Size = UDim2.new(0.4, 0, 0, 25)
MagnetRadiusValue.Position = UDim2.new(0.6, 0, 0, 0)
MagnetRadiusValue.Text = tostring(currentRadius)
MagnetRadiusValue.TextColor3 = Color3.fromRGB(0, 200, 255)
MagnetRadiusValue.BackgroundTransparency = 1
MagnetRadiusValue.Font = Enum.Font.GothamBold
MagnetRadiusValue.TextSize = 14
MagnetRadiusValue.TextXAlignment = Enum.TextXAlignment.Right
MagnetRadiusValue.Parent = MagnetRadiusContainer

local MagnetRadiusSlider = Instance.new("TextButton")
MagnetRadiusSlider.Size = UDim2.new(1, 0, 0, 25)
MagnetRadiusSlider.Position = UDim2.new(0, 0, 0, 30)
MagnetRadiusSlider.Text = "â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚"
MagnetRadiusSlider.TextColor3 = Color3.fromRGB(0, 150, 255)
MagnetRadiusSlider.BackgroundColor3 = Color3.fromRGB(30, 35, 50)
MagnetRadiusSlider.BorderSizePixel = 0
MagnetRadiusSlider.Font = Enum.Font.GothamBold
MagnetRadiusSlider.TextSize = 14
MagnetRadiusSlider.Parent = MagnetRadiusContainer

local MagnetSliderCorner = Instance.new("UICorner")
MagnetSliderCorner.CornerRadius = UDim.new(0, 6)
MagnetSliderCorner.Parent = MagnetRadiusSlider

-- Tornado Radius Control
local TornadoRadiusContainer = Instance.new("Frame")
TornadoRadiusContainer.Size = UDim2.new(1, 0, 0, 60)
TornadoRadiusContainer.Position = UDim2.new(0, 0, 0, 340)
TornadoRadiusContainer.BackgroundTransparency = 1
TornadoRadiusContainer.Parent = ContentFrame

local TornadoRadiusLabel = Instance.new("TextLabel")
TornadoRadiusLabel.Size = UDim2.new(0.6, 0, 0, 25)
TornadoRadiusLabel.Position = UDim2.new(0, 0, 0, 0)
TornadoRadiusLabel.Text = "TORNADO RADIUS:"
TornadoRadiusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TornadoRadiusLabel.BackgroundTransparency = 1
TornadoRadiusLabel.Font = Enum.Font.Gotham
TornadoRadiusLabel.TextSize = 12
TornadoRadiusLabel.TextXAlignment = Enum.TextXAlignment.Left
TornadoRadiusLabel.Parent = TornadoRadiusContainer

local TornadoRadiusValue = Instance.new("TextLabel")
TornadoRadiusValue.Size = UDim2.new(0.4, 0, 0, 25)
TornadoRadiusValue.Position = UDim2.new(0.6, 0, 0, 0)
TornadoRadiusValue.Text = tostring(tornadoRadius)
TornadoRadiusValue.TextColor3 = Color3.fromRGB(255, 150, 0)
TornadoRadiusValue.BackgroundTransparency = 1
TornadoRadiusValue.Font = Enum.Font.GothamBold
TornadoRadiusValue.TextSize = 14
TornadoRadiusValue.TextXAlignment = Enum.TextXAlignment.Right
TornadoRadiusValue.Parent = TornadoRadiusContainer

local TornadoRadiusSlider = Instance.new("TextButton")
TornadoRadiusSlider.Size = UDim2.new(1, 0, 0, 25)
TornadoRadiusSlider.Position = UDim2.new(0, 0, 0, 30)
TornadoRadiusSlider.Text = "â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚"
TornadoRadiusSlider.TextColor3 = Color3.fromRGB(255, 150, 0)
TornadoRadiusSlider.BackgroundColor3 = Color3.fromRGB(30, 35, 50)
TornadoRadiusSlider.BorderSizePixel = 0
TornadoRadiusSlider.Font = Enum.Font.GothamBold
TornadoRadiusSlider.TextSize = 14
TornadoRadiusSlider.Parent = TornadoRadiusContainer

local TornadoSliderCorner = Instance.new("UICorner")
TornadoSliderCorner.CornerRadius = UDim.new(0, 6)
TornadoSliderCorner.Parent = TornadoRadiusSlider

-- Floating Logo (Initially Hidden)
local FloatingLogo = Instance.new("ImageButton")
FloatingLogo.Size = UDim2.new(0, 60, 0, 60)
FloatingLogo.Position = UDim2.new(0, 20, 0, 20)
FloatingLogo.BackgroundColor3 = Color3.fromRGB(0, 50, 100)
FloatingLogo.BorderSizePixel = 0
FloatingLogo.Image = "rbxassetid://0" -- Placeholder - replace with your logo
FloatingLogo.Visible = false
FloatingLogo.ZIndex = 10
FloatingLogo.Parent = ScreenGui

local FloatingCorner = Instance.new("UICorner")
FloatingCorner.CornerRadius = UDim.new(0, 12)
FloatingCorner.Parent = FloatingLogo

local FloatingBorder = Instance.new("UIStroke")
FloatingBorder.Color = Color3.fromRGB(0, 150, 255)
FloatingBorder.Thickness = 2
FloatingBorder.Parent = FloatingLogo

-- Logo Text (if no image)
local LogoText = Instance.new("TextLabel")
LogoText.Size = UDim2.new(1, 0, 1, 0)
LogoText.Position = UDim2.new(0, 0, 0, 0)
LogoText.Text = "R\nV3"
LogoText.TextColor3 = Color3.fromRGB(255, 255, 255)
LogoText.BackgroundTransparency = 1
LogoText.Font = Enum.Font.GothamBlack
LogoText.TextSize = 14
LogoText.TextWrapped = true
LogoText.Parent = FloatingLogo

-- Function to update sliders
local function updateSliderVisual(slider, value, maxValue, color)
    local percentage = value / maxValue
    local bars = math.floor(percentage * 12)
    local visual = "â”‚" .. string.rep("â”€", bars) .. "â—‹" .. string.rep(" ", 11 - bars) .. "â”‚"
    slider.Text = visual
end

-- Initialize sliders
updateSliderVisual(MagnetRadiusSlider, currentRadius, 200, Color3.fromRGB(0, 150, 255))
updateSliderVisual(TornadoRadiusSlider, tornadoRadius, 100, Color3.fromRGB(255, 150, 0))

-- Slider functionality
local function setupSlider(slider, valueLabel, minVal, maxVal, callback)
    slider.MouseButton1Down:Connect(function()
        local connection
        connection = RunService.Heartbeat:Connect(function()
            local mouse = game:GetService("Players").LocalPlayer:GetMouse()
            local x = math.clamp((mouse.X - slider.AbsolutePosition.X) / slider.AbsoluteSize.X, 0, 1)
            local value = math.floor(minVal + (x * (maxVal - minVal)))
            
            valueLabel.Text = tostring(value)
            updateSliderVisual(slider, value, maxVal, slider.TextColor3)
            callback(value)
        end)
        
        game:GetService("UserInputService").InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                connection:Disconnect()
            end
        end)
    end)
end

setupSlider(MagnetRadiusSlider, MagnetRadiusValue, 10, 200, function(value)
    currentRadius = value
end)

setupSlider(TornadoRadiusSlider, TornadoRadiusValue, 10, 100, function(value)
    tornadoRadius = value
end)

-- Button functionality
ActivateMagnetButton.MouseButton1Click:Connect(function()
    startMagnet()
    StatusLabel.Text = "ðŸŸ¢ MAGNET ACTIVE\nâ€¢ Status: Magnet ON\nâ€¢ Parts: " .. #RapipppNetwork.BaseParts .. "\nâ€¢ RapipppModss V3.0"
    ActivateMagnetButton.BackgroundColor3 = Color3.fromRGB(0, 100, 30)
end)

DeactivateMagnetButton.MouseButton1Click:Connect(function()
    stopMagnet()
    StatusLabel.Text = "ðŸ”´ SYSTEM READY\nâ€¢ Status: Inactive\nâ€¢ Parts: 0\nâ€¢ RapipppModss V3.0"
    ActivateMagnetButton.BackgroundColor3 = Color3.fromRGB(0, 150, 50)
end)

ActivateTornadoButton.MouseButton1Click:Connect(function()
    startTornado()
    StatusLabel.Text = "ðŸŒªï¸ TORNADO ACTIVE\nâ€¢ Status: Tornado ON\nâ€¢ Parts: " .. #parts .. "\nâ€¢ RapipppModss V3.0"
    ActivateTornadoButton.BackgroundColor3 = Color3.fromRGB(200, 80, 0)
end)

DeactivateTornadoButton.MouseButton1Click:Connect(function()
    stopTornado()
    StatusLabel.Text = "ðŸ”´ SYSTEM READY\nâ€¢ Status: Inactive\nâ€¢ Parts: 0\nâ€¢ RapipppModss V3.0"
    ActivateTornadoButton.BackgroundColor3 = Color3.fromRGB(255, 100, 0)
end)

-- Close Button functionality
CloseButton.MouseButton1Click:Connect(function()
    -- Hide main GUI with tween
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(MainFrame, tweenInfo, {Position = UDim2.new(0.5, -175, 1, 10)})
    tween:Play()
    
    tween.Completed:Connect(function()
        MainFrame.Visible = false
        FloatingLogo.Visible = true
    end)
end)

-- Floating Logo functionality
FloatingLogo.MouseButton1Click:Connect(function()
    FloatingLogo.Visible = false
    MainFrame.Visible = true
    
    -- Show main GUI with tween
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(MainFrame, tweenInfo, {Position = UDim2.new(0.5, -175, 0.5, -240)})
    tween:Play()
end)

-- Make GUI draggable
local dragging = false
local dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

Header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

Header.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- Make floating logo draggable
local floatingDragging = false
local floatingDragInput, floatingDragStart, floatingStartPos

local function updateFloating(input)
    local delta = input.Position - floatingDragStart
    FloatingLogo.Position = UDim2.new(floatingStartPos.X.Scale, floatingStartPos.X.Offset + delta.X, floatingStartPos.Y.Scale, floatingStartPos.Y.Offset + delta.Y)
end

FloatingLogo.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        floatingDragging = true
        floatingDragStart = input.Position
        floatingStartPos = FloatingLogo.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                floatingDragging = false
            end
        end)
    end
end)

FloatingLogo.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        floatingDragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == floatingDragInput and floatingDragging then
        updateFloating(input)
    end
end)

-- Auto cleanup when character dies
LocalPlayer.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoidRootPart = newChar:WaitForChild("HumanoidRootPart")
    
    newChar:WaitForChild("Humanoid").Died:Connect(function()
        stopMagnet()
        stopTornado()
        StatusLabel.Text = "ðŸ”´ SYSTEM READY\nâ€¢ Status: Inactive\nâ€¢ Parts: 0\nâ€¢ RapipppModss V3.0"
        ActivateMagnetButton.BackgroundColor3 = Color3.fromRGB(0, 150, 50)
        ActivateTornadoButton.BackgroundColor3 = Color3.fromRGB(255, 100, 0)
    end)
end)

-- Update status periodically
RunService.Heartbeat:Connect(function()
    if magnetEnabled then
        StatusLabel.Text = "ðŸŸ¢ MAGNET ACTIVE\nâ€¢ Status: Magnet ON\nâ€¢ Parts: " .. #RapipppNetwork.BaseParts .. "\nâ€¢ RapipppModss V3.0"
    elseif tornadoEnabled then
        StatusLabel.Text = "ðŸŒªï¸ TORNADO ACTIVE\nâ€¢ Status: Tornado ON\nâ€¢ Parts: " .. #parts .. "\nâ€¢ RapipppModss V3.0"
    end
end)

print("ðŸŽ® RapipppModss V3.0 Successfully Loaded!")
print("ðŸ”® Features: Super Fast Magnet + Tornado, Rope Breaking, Premium GUI")
print("ðŸŒªï¸ Two Modes: Direct Magnet & Spinning Tornado")
print("ðŸ’Ž Close GUI to show floating logo")
print("ðŸ–±ï¸ Click floating logo to reopen GUI")