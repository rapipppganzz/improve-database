-- WORKING Mobile Mountain Tools with ALL FEATURES
-- Simple Drag System - Guaranteed Working

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

-- Variables
local isRunning = false
local currentCheckpoint = 1
local checkpoints = {}

-- Create GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "WorkingMountainTools"
screenGui.ResetOnSpawn = false
screenGui.Parent = player.PlayerGui

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 280, 0, 350)
mainFrame.Position = UDim2.new(0, 50, 0, 50) -- Start position
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

-- Title Bar - DRAG AREA
local titleBar = Instance.new("TextButton")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 40)
titleBar.BackgroundColor3 = Color3.fromRGB(138, 43, 226)
titleBar.BorderSizePixel = 0
titleBar.Text = ""
titleBar.AutoButtonColor = false
titleBar.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -50, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "‚õ∞Ô∏è Mountain Tools"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 16
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = titleBar

-- Close Button
local closeBtn = Instance.new("TextButton")
closeBtn.Name = "CloseButton"
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -35, 0.5, -15)
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 59, 59)
closeBtn.Text = "‚úï"
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.TextSize = 14
closeBtn.Font = Enum.Font.GothamBold
closeBtn.Parent = titleBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 6)
closeCorner.Parent = closeBtn

-- Content Frame
local contentFrame = Instance.new("Frame")
contentFrame.Name = "Content"
contentFrame.Size = UDim2.new(1, 0, 1, -40)
contentFrame.Position = UDim2.new(0, 0, 0, 40)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

-- Tab Buttons
local tabsFrame = Instance.new("Frame")
tabsFrame.Size = UDim2.new(1, -20, 0, 30)
tabsFrame.Position = UDim2.new(0, 10, 0, 10)
tabsFrame.BackgroundTransparency = 1
tabsFrame.Parent = contentFrame

local checkpointTab = Instance.new("TextButton")
checkpointTab.Size = UDim2.new(0.33, -2, 1, 0)
checkpointTab.Position = UDim2.new(0, 0, 0, 0)
checkpointTab.BackgroundColor3 = Color3.fromRGB(52, 152, 219)
checkpointTab.Text = "üéØ"
checkpointTab.TextColor3 = Color3.fromRGB(255, 255, 255)
checkpointTab.TextSize = 14
checkpointTab.Font = Enum.Font.GothamBold
checkpointTab.Parent = tabsFrame

local securityTab = Instance.new("TextButton")
securityTab.Size = UDim2.new(0.33, -2, 1, 0)
securityTab.Position = UDim2.new(0.33, 0, 0, 0)
securityTab.BackgroundColor3 = Color3.fromRGB(149, 165, 166)
securityTab.Text = "üîì"
securityTab.TextColor3 = Color3.fromRGB(255, 255, 255)
securityTab.TextSize = 14
securityTab.Font = Enum.Font.GothamBold
securityTab.Parent = tabsFrame

local notesTab = Instance.new("TextButton")
notesTab.Size = UDim2.new(0.34, 0, 1, 0)
notesTab.Position = UDim2.new(0.66, 0, 0, 0)
notesTab.BackgroundColor3 = Color3.fromRGB(149, 165, 166)
notesTab.Text = "üí¨"
notesTab.TextColor3 = Color3.fromRGB(255, 255, 255)
notesTab.TextSize = 14
notesTab.Font = Enum.Font.GothamBold
notesTab.Parent = tabsFrame

-- Add corners to tabs
for _, tab in pairs(tabsFrame:GetChildren()) do
    if tab:IsA("TextButton") then
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 6)
        corner.Parent = tab
    end
end

-- Tab Content Area
local tabContent = Instance.new("Frame")
tabContent.Size = UDim2.new(1, -20, 1, -50)
tabContent.Position = UDim2.new(0, 10, 0, 50)
tabContent.BackgroundTransparency = 1
tabContent.Parent = contentFrame

-- Checkpoint Tab Content
local checkpointContent = Instance.new("Frame")
checkpointContent.Size = UDim2.new(1, 0, 1, 0)
checkpointContent.BackgroundTransparency = 1
checkpointContent.Visible = true
checkpointContent.Parent = tabContent

local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, 0, 0, 25)
statusLabel.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
statusLabel.Text = "üî¥ Ready"
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.TextSize = 12
statusLabel.Font = Enum.Font.Gotham
statusLabel.Parent = checkpointContent

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 6)
statusCorner.Parent = statusLabel

local checkpointInfo = Instance.new("TextLabel")
checkpointInfo.Size = UDim2.new(1, 0, 0, 25)
checkpointInfo.Position = UDim2.new(0, 0, 0, 30)
checkpointInfo.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
checkpointInfo.Text = "üìç 0/0 Checkpoints"
checkpointInfo.TextColor3 = Color3.fromRGB(255, 255, 255)
checkpointInfo.TextSize = 12
checkpointInfo.Font = Enum.Font.Gotham
checkpointInfo.Parent = checkpointContent

local infoCorner = Instance.new("UICorner")
infoCorner.CornerRadius = UDim.new(0, 6)
infoCorner.Parent = checkpointInfo

-- Checkpoint Buttons
local scanBtn = Instance.new("TextButton")
scanBtn.Size = UDim2.new(1, 0, 0, 35)
scanBtn.Position = UDim2.new(0, 0, 0, 65)
scanBtn.BackgroundColor3 = Color3.fromRGB(52, 152, 219)
scanBtn.Text = "üîç Scan Checkpoints"
scanBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
scanBtn.TextSize = 12
scanBtn.Font = Enum.Font.GothamBold
scanBtn.Parent = checkpointContent

local scanCorner = Instance.new("UICorner")
scanCorner.CornerRadius = UDim.new(0, 6)
scanCorner.Parent = scanBtn

local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(1, 0, 0, 35)
toggleBtn.Position = UDim2.new(0, 0, 0, 105)
toggleBtn.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
toggleBtn.Text = "‚ñ∂Ô∏è Start Auto TP"
toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleBtn.TextSize = 12
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.Parent = checkpointContent

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 6)
toggleCorner.Parent = toggleBtn

local loopToggle = Instance.new("TextButton")
loopToggle.Size = UDim2.new(0.48, 0, 0, 30)
loopToggle.Position = UDim2.new(0, 0, 0, 150)
loopToggle.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
loopToggle.Text = "üîÑ Loop: ON"
loopToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
loopToggle.TextSize = 11
loopToggle.Font = Enum.Font.GothamBold
loopToggle.Parent = checkpointContent

local loopCorner = Instance.new("UICorner")
loopCorner.CornerRadius = UDim.new(0, 6)
loopCorner.Parent = loopToggle

local resetBtn = Instance.new("TextButton")
resetBtn.Size = UDim2.new(0.48, 0, 0, 30)
resetBtn.Position = UDim2.new(0.52, 0, 0, 150)
resetBtn.BackgroundColor3 = Color3.fromRGB(231, 76, 60)
resetBtn.Text = "üîÑ Reset"
resetBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
resetBtn.TextSize = 11
resetBtn.Font = Enum.Font.GothamBold
resetBtn.Parent = checkpointContent

local resetCorner = Instance.new("UICorner")
resetCorner.CornerRadius = UDim.new(0, 6)
resetCorner.Parent = resetBtn

-- Security Tab Content
local securityContent = Instance.new("Frame")
securityContent.Size = UDim2.new(1, 0, 1, 0)
securityContent.BackgroundTransparency = 1
securityContent.Visible = false
securityContent.Parent = tabContent

local securityStatus = Instance.new("TextLabel")
securityStatus.Size = UDim2.new(1, 0, 0, 25)
securityStatus.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
securityStatus.Text = "üîí Not Scanned"
securityStatus.TextColor3 = Color3.fromRGB(255, 255, 255)
securityStatus.TextSize = 12
securityStatus.Font = Enum.Font.Gotham
securityStatus.Parent = securityContent

local securityStatusCorner = Instance.new("UICorner")
securityStatusCorner.CornerRadius = UDim.new(0, 6)
securityStatusCorner.Parent = securityStatus

local securityScanBtn = Instance.new("TextButton")
securityScanBtn.Size = UDim2.new(1, 0, 0, 35)
securityScanBtn.Position = UDim2.new(0, 0, 0, 35)
securityScanBtn.BackgroundColor3 = Color3.fromRGB(230, 126, 34)
securityScanBtn.Text = "üîç Scan Backdoors"
securityScanBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
securityScanBtn.TextSize = 12
securityScanBtn.Font = Enum.Font.GothamBold
securityScanBtn.Parent = securityContent

local securityScanCorner = Instance.new("UICorner")
securityScanCorner.CornerRadius = UDim.new(0, 6)
securityScanCorner.Parent = securityScanBtn

local securityResults = Instance.new("TextLabel")
securityResults.Size = UDim2.new(1, 0, 0, 80)
securityResults.Position = UDim2.new(0, 0, 0, 80)
securityResults.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
securityResults.TextColor3 = Color3.fromRGB(255, 255, 255)
securityResults.TextSize = 10
securityResults.Font = Enum.Font.Gotham
securityResults.TextXAlignment = Enum.TextXAlignment.Left
securityResults.TextYAlignment = Enum.TextYAlignment.Top
securityResults.TextWrapped = true
securityResults.Text = "Click scan to check for vulnerabilities..."
securityResults.Parent = securityContent

local resultsCorner = Instance.new("UICorner")
resultsCorner.CornerRadius = UDim.new(0, 6)
resultsCorner.Parent = securityResults

local commandBox = Instance.new("TextBox")
commandBox.Size = UDim2.new(1, 0, 0, 25)
commandBox.Position = UDim2.new(0, 0, 0, 170)
commandBox.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
commandBox.TextColor3 = Color3.fromRGB(255, 255, 255)
commandBox.PlaceholderText = "Enter command..."
commandBox.Text = ""
commandBox.TextSize = 11
commandBox.Font = Enum.Font.Gotham
commandBox.Parent = securityContent

local commandCorner = Instance.new("UICorner")
commandCorner.CornerRadius = UDim.new(0, 6)
commandCorner.Parent = commandBox

local executeBtn = Instance.new("TextButton")
executeBtn.Size = UDim2.new(1, 0, 0, 25)
executeBtn.Position = UDim2.new(0, 0, 0, 200)
executeBtn.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
executeBtn.Text = "‚ö° Execute Command"
executeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
executeBtn.TextSize = 11
executeBtn.Font = Enum.Font.GothamBold
executeBtn.Parent = securityContent

local executeCorner = Instance.new("UICorner")
executeCorner.CornerRadius = UDim.new(0, 6)
executeCorner.Parent = executeBtn

-- Notes Tab Content
local notesContent = Instance.new("Frame")
notesContent.Size = UDim2.new(1, 0, 1, 0)
notesContent.BackgroundTransparency = 1
notesContent.Visible = false
notesContent.Parent = tabContent

local notesDisplay = Instance.new("ScrollingFrame")
notesDisplay.Size = UDim2.new(1, 0, 0, 150)
notesDisplay.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
notesDisplay.BorderSizePixel = 0
notesDisplay.ScrollBarThickness = 4
notesDisplay.CanvasSize = UDim2.new(0, 0, 0, 0)
notesDisplay.Parent = notesContent

local notesCorner = Instance.new("UICorner")
notesCorner.CornerRadius = UDim.new(0, 6)
notesCorner.Parent = notesDisplay

local messageBox = Instance.new("TextBox")
messageBox.Size = UDim2.new(1, 0, 0, 35)
messageBox.Position = UDim2.new(0, 0, 0, 160)
messageBox.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
messageBox.TextColor3 = Color3.fromRGB(255, 255, 255)
messageBox.PlaceholderText = "Type message for all players..."
messageBox.Text = ""
messageBox.TextSize = 11
messageBox.Font = Enum.Font.Gotham
messageBox.Parent = notesContent

local messageCorner = Instance.new("UICorner")
messageCorner.CornerRadius = UDim.new(0, 6)
messageCorner.Parent = messageBox

local sendNotesBtn = Instance.new("TextButton")
sendNotesBtn.Size = UDim2.new(1, 0, 0, 25)
sendNotesBtn.Position = UDim2.new(0, 0, 0, 200)
sendNotesBtn.BackgroundColor3 = Color3.fromRGB(52, 152, 219)
sendNotesBtn.Text = "üì§ Send Global Message"
sendNotesBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
sendNotesBtn.TextSize = 11
sendNotesBtn.Font = Enum.Font.GothamBold
sendNotesBtn.Parent = notesContent

local sendNotesCorner = Instance.new("UICorner")
sendNotesCorner.CornerRadius = UDim.new(0, 6)
sendNotesCorner.Parent = sendNotesBtn

-- Floating Button
local floatingBtn = Instance.new("TextButton")
floatingBtn.Name = "FloatingButton"
floatingBtn.Size = UDim2.new(0, 60, 0, 60)
floatingBtn.Position = UDim2.new(0, 20, 0, 20)
floatingBtn.BackgroundColor3 = Color3.fromRGB(138, 43, 226)
floatingBtn.Text = "‚õ∞Ô∏è"
floatingBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
floatingBtn.TextSize = 24
floatingBtn.Font = Enum.Font.GothamBold
floatingBtn.Visible = false
floatingBtn.ZIndex = 10
floatingBtn.Parent = screenGui

local floatingCorner = Instance.new("UICorner")
floatingCorner.CornerRadius = UDim.new(1, 0)
floatingCorner.Parent = floatingBtn

-- ========== SIMPLE DRAG THAT WORKS ==========

local dragging = false
local dragInput
local dragStart
local startPos

-- Main Frame Drag
local function update(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

titleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- Floating Button Drag
local floatingDragging = false
local floatingDragInput
local floatingDragStart
local floatingStartPos

local function updateFloating(input)
    local delta = input.Position - floatingDragStart
    floatingBtn.Position = UDim2.new(floatingStartPos.X.Scale, floatingStartPos.X.Offset + delta.X, floatingStartPos.Y.Scale, floatingStartPos.Y.Offset + delta.Y)
end

floatingBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        floatingDragging = true
        floatingDragStart = input.Position
        floatingStartPos = floatingBtn.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                floatingDragging = false
            end
        end)
    end
end)

floatingBtn.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        floatingDragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == floatingDragInput and floatingDragging then
        updateFloating(input)
    end
end)

-- ========== TAB SYSTEM ==========

local function showTab(tabName)
    checkpointContent.Visible = (tabName == "checkpoint")
    securityContent.Visible = (tabName == "security")
    notesContent.Visible = (tabName == "notes")
    
    checkpointTab.BackgroundColor3 = (tabName == "checkpoint") and Color3.fromRGB(52, 152, 219) or Color3.fromRGB(149, 165, 166)
    securityTab.BackgroundColor3 = (tabName == "security") and Color3.fromRGB(230, 126, 34) or Color3.fromRGB(149, 165, 166)
    notesTab.BackgroundColor3 = (tabName == "notes") and Color3.fromRGB(52, 152, 219) or Color3.fromRGB(149, 165, 166)
end

checkpointTab.MouseButton1Click:Connect(function()
    showTab("checkpoint")
end)

securityTab.MouseButton1Click:Connect(function()
    showTab("security")
end)

notesTab.MouseButton1Click:Connect(function()
    showTab("notes")
end)

-- ========== CHECKPOINT SYSTEM ==========

local function scanCheckpoints()
    checkpoints = {}
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") and (
            string.lower(obj.Name):find("checkpoint") or 
            string.lower(obj.Name):find("stage") or
            string.lower(obj.Name):find("platform") or
            string.lower(obj.Name):find("point")
        ) then
            table.insert(checkpoints, obj)
        end
    end
    
    table.sort(checkpoints, function(a, b)
        return a.Position.Y < b.Position.Y
    end)
    
    return #checkpoints
end

local function teleportToCheckpoint(checkpoint)
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") and checkpoint then
        character.HumanoidRootPart.CFrame = checkpoint.CFrame + Vector3.new(0, 5, 0)
    end
end

local function startAutoTP()
    isRunning = true
    statusLabel.Text = "üü¢ Auto TP Running"
    toggleBtn.Text = "‚è∏Ô∏è Stop Auto TP"
    toggleBtn.BackgroundColor3 = Color3.fromRGB(231, 76, 60)
    
    spawn(function()
        while isRunning and #checkpoints > 0 do
            if currentCheckpoint > #checkpoints then
                currentCheckpoint = 1
                if not loopEnabled then
                    isRunning = false
                    statusLabel.Text = "‚úÖ Completed"
                    toggleBtn.Text = "‚ñ∂Ô∏è Start Auto TP"
                    toggleBtn.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
                    break
                end
            end
            
            checkpointInfo.Text = string.format("üìç %d/%d", currentCheckpoint, #checkpoints)
            teleportToCheckpoint(checkpoints[currentCheckpoint])
            
            currentCheckpoint = currentCheckpoint + 1
            wait(1)
        end
    end)
end

-- ========== SECURITY SYSTEM ==========

local function scanForBackdoors()
    local results = {
        remoteEvents = 0,
        remoteFunctions = 0,
        suspiciousScripts = 0
    }
    
    for _, obj in pairs(game:GetDescendants()) do
        if obj:IsA("RemoteEvent") then
            results.remoteEvents = results.remoteEvents + 1
        elseif obj:IsA("RemoteFunction") then
            results.remoteFunctions = results.remoteFunctions + 1
        elseif obj:IsA("Script") or obj:IsA("LocalScript") then
            local suspiciousNames = {"admin", "backdoor", "execute", "command", "control", "hack"}
            local lowerName = string.lower(obj.Name)
            for _, name in pairs(suspiciousNames) do
                if string.find(lowerName, name) then
                    results.suspiciousScripts = results.suspiciousScripts + 1
                    break
                end
            end
        end
    end
    
    return results
end

-- ========== BUTTON FUNCTIONS ==========

-- Checkpoint Tab
scanBtn.MouseButton1Click:Connect(function()
    local count = scanCheckpoints()
    checkpointInfo.Text = string.format("üìç %d/%d Checkpoints", 1, count)
    currentCheckpoint = 1
    statusLabel.Text = "‚úÖ Found " .. count .. " checkpoints"
end)

toggleBtn.MouseButton1Click:Connect(function()
    if #checkpoints == 0 then
        statusLabel.Text = "‚ö†Ô∏è Scan checkpoints first!"
        return
    end
    
    if isRunning then
        isRunning = false
        statusLabel.Text = "üî¥ Stopped"
        toggleBtn.Text = "‚ñ∂Ô∏è Start Auto TP"
        toggleBtn.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
    else
        startAutoTP()
    end
end)

local loopEnabled = true
loopToggle.MouseButton1Click:Connect(function()
    loopEnabled = not loopEnabled
    loopToggle.Text = loopEnabled and "üîÑ Loop: ON" or "üîÑ Loop: OFF"
    loopToggle.BackgroundColor3 = loopEnabled and Color3.fromRGB(46, 204, 113) or Color3.fromRGB(149, 165, 166)
end)

resetBtn.MouseButton1Click:Connect(function()
    currentCheckpoint = 1
    if #checkpoints > 0 then
        teleportToCheckpoint(checkpoints[1])
        checkpointInfo.Text = string.format("üìç %d/%d", 1, #checkpoints)
        statusLabel.Text = "üîÑ Reset to checkpoint 1"
    end
end)

-- Security Tab
securityScanBtn.MouseButton1Click:Connect(function()
    local results = scanForBackdoors()
    local total = results.remoteEvents + results.remoteFunctions + results.suspiciousScripts
    
    securityResults.Text = string.format(
        "üîì Security Scan Results:\n\nRemoteEvents: %d\nRemoteFunctions: %d\nSuspicious: %d\n\nTotal: %d objects",
        results.remoteEvents,
        results.remoteFunctions,
        results.suspiciousScripts,
        total
    )
    
    if total > 10 then
        securityStatus.Text = "üî¥ HIGH RISK"
        securityStatus.BackgroundColor3 = Color3.fromRGB(231, 76, 60)
    elseif total > 5 then
        securityStatus.Text = "üü° MEDIUM RISK"
        securityStatus.BackgroundColor3 = Color3.fromRGB(230, 126, 34)
    else
        securityStatus.Text = "üü¢ LOW RISK"
        securityStatus.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
    end
end)

executeBtn.MouseButton1Click:Connect(function()
    local command = commandBox.Text
    if command == "" then return end
    
    -- Try to find and execute command via available RemoteEvents
    local executed = false
    for _, obj in pairs(game:GetDescendants()) do
        if obj:IsA("RemoteEvent") then
            pcall(function()
                obj:FireServer(command)
                executed = true
            end)
            if executed then break end
        end
    end
    
    if executed then
        securityResults.Text = "‚úÖ Command executed via RemoteEvent\nCommand: " .. command
    else
        securityResults.Text = "‚ùå No available RemoteEvent found\nCommand: " .. command
    end
    
    commandBox.Text = ""
end)

-- Notes Tab
sendNotesBtn.MouseButton1Click:Connect(function()
    local message = messageBox.Text
    if message and #message > 0 then
        -- Simulate sending global message
        notesDisplay.CanvasSize = UDim2.new(0, 0, 0, notesDisplay.CanvasSize.Y.Offset + 30)
        
        local noteFrame = Instance.new("Frame")
        noteFrame.Size = UDim2.new(1, -10, 0, 25)
        noteFrame.Position = UDim2.new(0, 5, 0, notesDisplay.CanvasSize.Y.Offset - 30)
        noteFrame.BackgroundColor3 = Color3.fromRGB(65, 65, 75)
        noteFrame.Parent = notesDisplay
        
        local noteCorner = Instance.new("UICorner")
        noteCorner.CornerRadius = UDim.new(0, 4)
        noteCorner.Parent = noteFrame
        
        local noteText = Instance.new("TextLabel")
        noteText.Size = UDim2.new(1, -10, 1, 0)
        noteText.Position = UDim2.new(0, 5, 0, 0)
        noteText.BackgroundTransparency = 1
        noteText.Text = player.Name .. ": " .. message
        noteText.TextColor3 = Color3.fromRGB(255, 255, 255)
        noteText.TextSize = 10
        noteText.Font = Enum.Font.Gotham
        noteText.TextXAlignment = Enum.TextXAlignment.Left
        noteText.Parent = noteFrame
        
        messageBox.Text = ""
        notesDisplay.CanvasPosition = Vector2.new(0, notesDisplay.CanvasSize.Y.Offset)
    end
end)

-- ========== WINDOW MANAGEMENT ==========

closeBtn.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
    floatingBtn.Visible = true
end)

floatingBtn.MouseButton1Click:Connect(function()
    mainFrame.Visible = true
    floatingBtn.Visible = false
end)

-- ========== INITIALIZATION ==========

-- Auto scan on start
wait(1)
local count = scanCheckpoints()
checkpointInfo.Text = string.format("üìç %d/%d Checkpoints", 1, count)
statusLabel.Text = "‚úÖ Ready - Drag title bar to move"

print("üéØ Mountain Tools Loaded Successfully!")
print("‚ú® Drag the title bar to move the window!")
print("üì± All features are working!")